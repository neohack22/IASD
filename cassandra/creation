-- 1 1. Pour chaque modèle ci-dessous, 
-- vous devrez :

-- b. Modèle colonne en utilisant Cassandra

-- (i) Implémenter le modèle et donner les commandes de création du modèle, 
-- en expliquant quelle partie du modèle SQL vous avez choisi 
-- d’implémenter (si vous n’avez choisi d’en implémenter qu’une partie),

CREATE KEYSPACE IF NOT EXISTS GestionMusique 
WITH REPLICATION = { 
    'class' : 'SimpleStrategy', 'replication_factor': 3};

USE GestionMusique;    

create type GestionMusique.Utilisateurs (
    UID  int, nom text, prenom text, dateNaissance date);

create type GestionMusique.Artiste (AID int, nomArtiste text);

create type GestionMusique.Musique (
    MID  int, titre text, Artiste frozen<Artiste>
);

create type GestionMusique.Playlist (
    PID  int, nom text, Utilisateurs frozen<Utilisateurs>
);

create type GestionMusique.Contenu (
    PID frozen<Playlist>, MID frozen<Musique>
);

CREATE TABLE GestionMusique.Recommandation (
    id UUID PRIMARY KEY, UID frozen<Utilisateurs>, Musique frozen<Musique>
);

CREATE TABLE GestionMusique.Musique (
    id UUID, MID int, titre text, Artiste frozen<Artiste>, 
    Playlist frozen<Contenu>, PRIMARY KEY(id, playlist, Artiste)
);

CREATE TABLE GestionMusique.Utilisateurs (
    UID int, nom text, prenom text, dateNaissance date, AID int, 
    nomArtiste text, primary key(nomArtiste, UID, dateNaissance
    ));

CREATE TABLE GestionMusique.Contenu (
    PID int, UID int, nom text, prenom text, MID int, titre text, 
    AID int, nomArtiste text, PRIMARY KEY(PID, nomArtiste, MID)
);